
                                                         MODULE-1

CREATE OR REPLACE TRIGGER ADD_STUD_BKP
    AFTER INSERT ON STUD_TBL FOR EACH ROW
    BEGIN
    INSERT INTO STUDENT_BKP VALUES(:NEW.STUD_ID,:NEW.STUD_NAME,:NEW.STUD_ADDRESS,:NEW.STUD_CONTACT_NO,:NEW.STUD_STANDARD_ID,:NEW.STUD_DIV,:NEW.PARENT_NAME,:NEW.P_CONTACT_NO,:NEW.P_OFFICE_ADD,:NEW.P_MOBILE_NO,:NEW.P_EMAIL_ID);
EXCEPTION WHEN OTHERS THEN RECORD_ERROR();
    END;
    /
CREATE SEQUENCE INS;

Sequence created.

SQL> CREATE SEQUENCE DEL;

Sequence created.

SQL> CREATE SEQUENCE UPD;

Sequence created.

CREATE OR REPLACE TRIGGER ADD_STUD_HIST
    AFTER DELETE ON STUD_TBL FOR EACH ROW
    BEGIN
    INSERT INTO STUDENT_HIST VALUES(:OLD.STUD_ID,:OLD.STUD_NAME,:OLD.STUD_ADDRESS,:OLD.STUD_CONTACT_NO,:OLD.STUD_STANDARD_ID,:OLD.STUD_DIV,:OLD.PARENT_NAME,:OLD.P_CONTACT_NO,:OLD.P_OFFICE_ADD,:OLD.P_MOBILE_NO,:OLD.P_EMAIL_ID);
EXCEPTION WHEN OTHERS THEN RECORD_ERROR();
    END;
    /
CREATE OR REPLACE TRIGGER INSERT_AUDIT_EXAM
    AFTER INSERT OR DELETE OR UPDATE ON STUD_FEES_DETAILS FOR EACH ROW
    BEGIN
    IF INSERTING THEN
    INSERT INTO EXAM_TABLE_AUDIT VALUES (CONCAT('I',INS.NEXTVAL),USER,'INSERT',NULL,'Y',TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MM:SS'));
   
    ELSIF DELETING THEN
    INSERT INTO EXAM_TABLE_AUDIT VALUES (CONCAT('D',DEL.NEXTVAL),USER,'DELETE','Y',NULL,TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MM:SS'));
    
    ELSE
    INSERT INTO EXAM_TABLE_AUDIT VALUES (CONCAT('U',UPD.NEXTVAL),USER,'UPDATE',NULL,'Y',TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MM:SS'));
    
  END IF;
   END;
    /
                                                          MODULE-6



CREATE OR REPLACE TRIGGER ADD_EXAM_HIST
    AFTER INSERT ON STUD_EXAM_DETAILS FOR EACH ROW
    BEGIN
    INSERT INTO STUD_EXAM_DETAILS_HIST VALUES(:NEW.STUD_ID,:NEW.STUD_COURSE_ID,:NEW.STUD_DIV,:NEW.STUD_SUB_ID,:NEW.STUD_SUB_MARKS,:NEW.SUB_TOTAL_MARKS,:NEW.EXAM_ID,:NEW.EXAM_YEAR,:NEW.EXAM_DATE);
EXCEPTION WHEN OTHERS THEN RECORD_ERROR();
    END;
    /


CREATE SEQUENCE INS1;

Sequence created.

SQL> CREATE SEQUENCE DEL1;

Sequence created.

SQL> CREATE SEQUENCE UPD1;

Sequence created.

CREATE OR REPLACE TRIGGER INSERT_AUDIT
    AFTER INSERT OR DELETE OR UPDATE ON STUD_EXAM_DETAILS FOR EACH ROW
    BEGIN
    IF INSERTING THEN
    INSERT INTO FEES_TABLE_AUDIT VALUES (CONCAT('I',INS1.NEXTVAL),USER,'INSERT',NULL,'Y',TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MM:SS'));
    ELSIF DELETING THEN
    INSERT INTO FEES_TABLE_AUDIT VALUES (CONCAT('D',DEL1.NEXTVAL),USER,'DELETE','Y',NULL,TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MM:SS'));
    ELSE
    INSERT INTO FEES_TABLE_AUDIT VALUES (CONCAT('U',UPD1.NEXTVAL),USER,'UPDATE',NULL,'Y',TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MM:SS'));
  END IF;
   END;
    /